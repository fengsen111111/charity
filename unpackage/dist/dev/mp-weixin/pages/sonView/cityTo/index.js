(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sonView/cityTo/index"],{264:function(t,n,e){"use strict";(function(t,n){var o=e(4);e(26);o(e(25));var i=o(e(265));t.__webpack_require_UNI_MP_PLUGIN__=e,n(i.default)}).call(this,e(1)["default"],e(2)["createPage"])},265:function(t,n,e){"use strict";e.r(n);var o=e(266),i=e(268);for(var c in i)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(c);e(270);var a,r=e(32),u=Object(r["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);u.options.__file="pages/sonView/cityTo/index.vue",n["default"]=u.exports},266:function(t,n,e){"use strict";e.r(n);var o=e(267);e.d(n,"render",(function(){return o["render"]})),e.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),e.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),e.d(n,"components",(function(){return o["components"]}))},267:function(t,n,e){"use strict";var o;e.r(n),e.d(n,"render",(function(){return i})),e.d(n,"staticRenderFns",(function(){return a})),e.d(n,"recyclableRender",(function(){return c})),e.d(n,"components",(function(){return o}));var i=function(){var t=this,n=t.$createElement;t._self._c},c=!1,a=[];i._withStripped=!0},268:function(t,n,e){"use strict";e.r(n);var o=e(269),i=e.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=i.a},269:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={data:function(){return{title:"四川大学华西医院",distance:0,latitude:39.909,longitude:116.39742,scale:12,markers:[],markerHeight:30,doorAddress:[]}},onLoad:function(){},mounted:function(){this.distance=this.getMapDistance("104.04311","30.64242","104.060268","30.642047"),console.log("距离",this.distance)},methods:{getLocationInfo:function(){var n=this;t.getLocation({type:"gcj02",success:function(t){n.longitude=t.longitude,n.latitude=t.latitude,console.log("获取当前的用户经度",n.longitude),console.log("获取当前的用户纬度",n.latitude);var e=0;if(n.longitude.toString().indexOf(".")>0){var o=n.longitude.toString().split(".");o.length>=2&&parseFloat(""===o[0]?0:o[0])+parseFloat("."+o[1].slice(0,6))}if(n.latitude.toString().indexOf(".")>0){var i=n.latitude.toString().split(".");i.length>=2&&(e=parseFloat(""===i[0]?0:i[0])+parseFloat("."+i[1].slice(0,6)))}console.log("纬度",e),n.markers=[{id:"",latitude:t.latitude,longitude:t.longitude,iconPath:"../../static/img/phone.png",width:n.markerHeight,height:n.markerHeight}],n.getList()}})},openConfirm:function(){return new Promise((function(n,e){t.showModal({title:"请求授权当前位置",content:"我们需要获取地理位置信息",success:function(o){o.confirm?t.openSetting().then((function(t){!0===t[1].authSetting["scope.userLocation"]?n():e()})):o.cancel&&e()}})}))},rejectGetLocation:function(){t.showToast({title:"你拒绝了授权，无法获得周边信息",icon:"none",duration:2e3})},getList:function(){console.log("获取周围美食")},onReady:function(){var t=this;this.getAuthorize().then((function(){t.getLocationInfo()})).catch((function(){t.openConfirm().then((function(){t.getLocationInfo()})).catch((function(){t.rejectGetLocation()}))}))},openMap:function(n,e){console.log("获取经纬度ssssfff",n,e),t.getLocation({success:function(o){console.log("location success",parseFloat(e),parseFloat(n)),t.openLocation({latitude:parseFloat(e),longitude:parseFloat(n),scale:18,name:"四川大学华西医院",address:"xx街xx号"})}})},Rad:function(t){return t*Math.PI/180},getMapDistance:function(t,n,e,o){var i=this.Rad(t),c=this.Rad(e),a=i-c,r=this.Rad(n)-this.Rad(o),u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(i)*Math.cos(c)*Math.pow(Math.sin(r/2),2)));return u*=6378.137,u=Math.round(1e4*u)/1e4,u},getAuthorize:function(){return new Promise((function(n,e){t.authorize({scope:"scope.userLocation",success:function(){n()},fail:function(){e()}})}))}}};n.default=e}).call(this,e(2)["default"])},270:function(t,n,e){"use strict";e.r(n);var o=e(271),i=e.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=i.a},271:function(t,n,e){}},[[264,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/sonView/cityTo/index.js.map